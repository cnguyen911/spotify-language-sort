(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,,,function(e,a,t){e.exports=t(32)},,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),s=t(12),c=t.n(s),r=(t(21),t(22),t(13)),o=t(2);var i=function(){return n.a.createElement("div",{className:"flex justify-center items-center min-h-screen bg-spotify-black"},n.a.createElement("div",{className:"bg-neutral p-8 rounded-lg shadow-lg max-w-md text-center"},n.a.createElement("h2",{className:"text-2xl font-bold text-spotify-green mb-4"},"Welcome to Language Sorter"),n.a.createElement("p",{className:"text-spotify-grey mb-6"},"This app helps you organize your Spotify playlists by language. It will analyze your playlist and create separate playlists for each language detected."),n.a.createElement("button",{className:"bg-spotify-green hover:bg-green-500 text-white font-bold py-3 px-6 rounded-full transition-all",onClick:()=>{window.location.href="http://localhost:5000/api/spotify/login"}},"Login with Spotify")))};t(23);var m=function(e){let{playlist:a,onSelect:t}=e;const l=a.images&&a.images.length>0?a.images[0].url:"/default-playlist.png";return n.a.createElement("div",{className:"playlist-card",onClick:()=>{t(a)}},n.a.createElement("div",{className:"playlist-image"},n.a.createElement("img",{src:l,alt:a.name})),n.a.createElement("div",{className:"playlist-info"},n.a.createElement("h3",null,a.name),n.a.createElement("p",null,a.tracks.total," tracks")))},u=t(33);const g={getUserPlaylists:async e=>{try{return(await u.a.get("http://localhost:5000/api/spotify/playlists",{params:{access_token:e}})).data.items}catch(a){throw console.error("Error fetching playlists:",a),a}},analyzePlaylist:async(e,a)=>{try{return(await u.a.get(`http://localhost:5000/api/spotify/playlist/${e}`,{params:{access_token:a}})).data}catch(t){throw console.error("Error analyzing playlist:",t),t}},createLanguagePlaylists:async(e,a,t)=>{try{return(await u.a.post("http://localhost:5000/api/spotify/create-playlists",{originalPlaylistName:a,tracksByLanguage:t},{params:{access_token:e}})).data.results}catch(l){throw console.error("Error creating playlists:",l),l}}};t(28);const y=["English","Spanish","French","German","Italian","Portuguese","Japanese","Korean","Chinese","Vietnamese","Russian","Arabic","Hindi","Thai","Dutch","Swedish","Norwegian","Danish","Finnish","Polish","Czech","Hungarian","Romanian","Turkish","Greek","Ukrainian","Bulgarian","Traditional Chinese","Bengali","Tamil","Telugu","Kannada","Malayalam","Filipino","Indonesian"];var p=function(e){let{tracksByLanguage:a,onSave:t,onCancel:s}=e;const[c,r]=Object(l.useState)(()=>{const e={};return Object.entries(a).forEach(a=>{let[t,l]=a;l.forEach(a=>{e[a.id]={...a,language:t}})}),e});console.log("Tracks by language received:",a),console.log("Initialized edited tracks:",c);const o=Object.values(c),i=[...y].sort((e,a)=>"Unknown"===e?1:"Unknown"===a?-1:"Other"===e?1:"Other"===a?-1:e.localeCompare(a));return n.a.createElement("div",{className:"language-editor"},n.a.createElement("h3",null,"Edit Language Classifications"),n.a.createElement("p",null,"Review and correct language classifications for better playlist sorting."),n.a.createElement("div",{className:"track-list"},o.map(e=>n.a.createElement("div",{key:e.id,className:"track-item"},n.a.createElement("div",{className:"track-info"},n.a.createElement("div",{className:"track-name"},e.name),n.a.createElement("div",{className:"track-artists"},e.artists.map(e=>e.name).join(", "))),n.a.createElement("div",{className:"track-language"},n.a.createElement("select",{value:e.language,onChange:a=>((e,a)=>{r(t=>({...t,[e]:{...t[e],language:a}}))})(e.id,a.target.value)},i.map(e=>n.a.createElement("option",{key:e,value:e},e)),n.a.createElement("option",{value:"Unknown"},"Unknown"),n.a.createElement("option",{value:"Other"},"Other")))))),n.a.createElement("div",{className:"editor-actions"},n.a.createElement("button",{className:"cancel-button",onClick:s},"Cancel"),n.a.createElement("button",{className:"save-button",onClick:()=>{const e={};Object.values(c).forEach(a=>{e[a.language]||(e[a.language]=[]),e[a.language].push(a)}),t(e)}},"Save Changes")))};t(29);var d=function(e){let{playlist:a,token:t,onBack:s}=e;const[c,r]=Object(l.useState)(!0),[o,i]=Object(l.useState)(!1),[m,u]=Object(l.useState)(!1),[y,d]=Object(l.useState)(null),[E,h]=Object(l.useState)(null),[k,f]=Object(l.useState)([]),[b,v]=Object(l.useState)(!1),[N,S]=Object(l.useState)(null);if(Object(l.useEffect)(()=>{(async()=>{try{r(!0),i(!0);const e=await g.analyzePlaylist(a.id,t);console.log("Playlist data received:",e),h(e),r(!1),i(!1)}catch(y){console.error("Error analyzing playlist:",y),d("Failed to analyze playlist. Please try again."),r(!1),i(!1)}})()},[a.id,t]),c)return n.a.createElement("div",{className:"language-sorter"},n.a.createElement("button",{className:"back-button",onClick:s},"Back to Playlists"),n.a.createElement("h2",null,'Analyzing "',a.name,'"'),n.a.createElement("div",{className:"loading-spinner"}),n.a.createElement("p",null,"This may take a moment for larger playlists..."));if(y)return n.a.createElement("div",{className:"language-sorter"},n.a.createElement("button",{className:"back-button",onClick:s},"Back to Playlists"),n.a.createElement("div",{className:"error"},y));const w=N||E.tracksByLanguage;return n.a.createElement("div",{className:"language-sorter"},n.a.createElement("button",{className:"back-button",onClick:s},"Back to Playlists"),n.a.createElement("h2",null,"Playlist: ",a.name),o?n.a.createElement("div",{className:"analyzing"},n.a.createElement("div",{className:"loading-spinner"}),n.a.createElement("p",null,"Analyzing languages in your playlist...")):b?n.a.createElement(p,{tracksByLanguage:E.tracksByLanguage,onSave:e=>{S(e),v(!1)},onCancel:()=>{v(!1)}}):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"language-summary"},n.a.createElement("h3",null,"Languages Detected"),n.a.createElement("div",{className:"language-list"},Object.entries(w).map(e=>{let[a,t]=e;return n.a.createElement("div",{className:"language-item",key:a},n.a.createElement("span",{className:"language-name"},a),n.a.createElement("span",{className:"language-count"},t.length," tracks"))})),n.a.createElement("div",{className:"language-actions"},n.a.createElement("button",{onClick:()=>{v(!0)},className:"edit-button"},"Edit Languages"))),k.length>0?n.a.createElement("div",{className:"created-playlists"},n.a.createElement("h3",null,"Created Playlists"),n.a.createElement("ul",{className:"playlist-results"},k.map(e=>n.a.createElement("li",{key:e.playlistId},n.a.createElement("a",{href:`https://open.spotify.com/playlist/${e.playlistId}`,target:"_blank",rel:"noopener noreferrer"},e.playlistName),n.a.createElement("span",{className:"track-count"},"(",e.trackCount," tracks)"))))):n.a.createElement("button",{className:"create-button",onClick:async()=>{try{u(!0);const e=N||E.tracksByLanguage,l=await g.createLanguagePlaylists(t,a.name,e);f(l),u(!1)}catch(y){console.error("Error creating playlists:",y),d("Failed to create language playlists. Please try again."),u(!1)}},disabled:m},m?"Creating Playlists...":"Create Language Playlists")))};t(30);var E=function(e){let{token:a}=e;const[t,s]=Object(l.useState)([]),[c,r]=Object(l.useState)(!0),[o,i]=Object(l.useState)(null),[u,y]=Object(l.useState)(null);Object(l.useEffect)(()=>{(async()=>{try{r(!0);const e=await g.getUserPlaylists(a);s(e),r(!1)}catch(o){console.error("Error fetching playlists:",o),i("Failed to load your playlists. Please try again."),r(!1)}})()},[a]);const p=e=>{y(e)};return c?n.a.createElement("div",{className:"loading"},"Loading your playlists..."):o?n.a.createElement("div",{className:"error"},o):n.a.createElement("div",{className:"dashboard"},n.a.createElement("div",{className:"dashboard-header"},n.a.createElement("button",{className:"logout-button",onClick:()=>{localStorage.removeItem("spotify_tokens"),window.location.href="/"}},"Logout")),u?n.a.createElement(d,{playlist:u,token:a,onBack:()=>{y(null)}}):n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",null,"Your Playlists"),n.a.createElement("p",null,"Select a playlist to sort by language:"),n.a.createElement("div",{className:"playlists-grid"},t.map(e=>n.a.createElement(m,{key:e.id,playlist:e,onSelect:p})))))};const h=()=>{const e=new URLSearchParams(window.location.search),a={};for(const[t,l]of e.entries())a[t]=l;return a},k=(e,a,t)=>{const l=Date.now()+1e3*t;localStorage.setItem("spotify_tokens",JSON.stringify({access_token:e,refresh_token:a,expires_in:t,expiration:l}))};t(31);var f=function(){const[e,a]=Object(l.useState)(null),[t,s]=Object(l.useState)(null),[c,m]=Object(l.useState)(null);return Object(l.useEffect)(()=>{const e=h();if(e.access_token)a(e.access_token),s(e.refresh_token),m(e.expires_in),k(e.access_token,e.refresh_token,e.expires_in),window.history.pushState({},null,"/");else{const e=JSON.parse(localStorage.getItem("spotify_tokens"));e&&e.access_token&&(a(e.access_token),s(e.refresh_token),m(e.expires_in))}},[]),n.a.createElement(r.a,null,n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement("h1",null,"Spotify Language Playlist Sorter")),n.a.createElement("main",null,n.a.createElement(o.c,null,n.a.createElement(o.a,{path:"/",element:e?n.a.createElement(E,{token:e}):n.a.createElement(i,null)}))),n.a.createElement("footer",null,n.a.createElement("p",null,"\xa9 2025 Spotify Language Playlist Sorter"))))};c.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(f,null)))}],[[15,1,2]]]);
//# sourceMappingURL=main.2ebe68a7.chunk.js.map